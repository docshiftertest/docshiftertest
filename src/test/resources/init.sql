CREATE SCHEMA IF NOT EXISTS DOCSHIFTER;
SET SCHEMA DOCSHIFTER;
DROP TABLE IF EXISTS GLOBAL_SETTINGS;
CREATE TABLE GLOBAL_SETTINGS(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,DEFAULTERRORFOLDER VARCHAR(255),DEFAULTTEMPFOLDER VARCHAR(255),MQQUEUE VARCHAR(255),MQSYSTEM VARCHAR(255),MQURL VARCHAR(255),MQUSER VARCHAR(255),MQUSERPASSWORD VARCHAR(255));
INSERT INTO GLOBAL_SETTINGS VALUES (1,'target/test-classes/ds/error', 'target/test-classes/ds/work', 'docshifter', 'amqp', 'tcp://192.168.10.138:61616', 'docshifter', 'docshifter') ;

CREATE TABLE IF NOT EXISTS MONITORING_CONFIGURATION(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255));
CREATE TABLE IF NOT EXISTS  CHAIN_CONFIGURATION(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,DESCRIPTION VARCHAR(255),ENABLED BOOLEAN NOT NULL,ERRORMAIL_DESTINATION VARCHAR(255),ERRORMAIL_HOST VARCHAR(255),ERRORMAIL_ORIGIN VARCHAR(255),NAME VARCHAR(255),PRINTERNAME VARCHAR(255),QUEUENAME VARCHAR(255),ROOTNODE_ID BIGINT,PRIORITY INTEGER,TIMEOUT BIGINT NOT NULL);
CREATE TABLE IF NOT EXISTS  MODULE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,CLASSNAME VARCHAR(255),CONDITION VARCHAR(255),DESCRIPTION VARCHAR(255),INPUTFILETYPE VARCHAR(255),NAME VARCHAR(255),OUTPUTFILETYPE VARCHAR(255),TYPE VARCHAR(255),CONSTRAINT UK_V5CLP8YHGI3SF4VGUA5T8HFG UNIQUE(CLASSNAME));

CREATE TABLE IF NOT EXISTS  MODULE_CONFIGURATION(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,DESCRIPTION VARCHAR(255),NAME VARCHAR(255),MODULE_ID BIGINT,CONSTRAINT FKCJ8AF883FUD0FAE5AU5D2M5V8 FOREIGN KEY(MODULE_ID) REFERENCES DOCSHIFTER.MODULE(ID));

CREATE TABLE IF NOT EXISTS  MODULECONFIGURATION_PARAMETERVALUES(MODULECONFIGURATION_ID BIGINT NOT NULL,PARAMETERVALUES VARCHAR(2048),PARAMETERVALUES_KEY BIGINT NOT NULL,PRIMARY KEY(MODULECONFIGURATION_ID,PARAMETERVALUES_KEY),CONSTRAINT FKDJKXLDXH15Y06YBOAI6AS3EE6 FOREIGN KEY(MODULECONFIGURATION_ID) REFERENCES DOCSHIFTER.MODULE_CONFIGURATION(ID));
CREATE TABLE IF NOT EXISTS  MODULEPARAMS(MODULE BIGINT NOT NULL,PARAM BIGINT NOT NULL,PRIMARY KEY(MODULE,PARAM),CONSTRAINT FKBUG0SCAU9UK2GO5EJ1HDDA812 FOREIGN KEY(MODULE) REFERENCES DOCSHIFTER.MODULE(ID));
CREATE TABLE IF NOT EXISTS  NODE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,MODULECONFIGURATION_ID BIGINT,PARENTNODE_ID BIGINT,CONSTRAINT FKDPBXB57BGEHLAYQB30GQ252VG FOREIGN KEY(MODULECONFIGURATION_ID) REFERENCES DOCSHIFTER.MODULE_CONFIGURATION(ID),CONSTRAINT FK4WJRE833Q4WNFWWTL0YBS3WN7 FOREIGN KEY(PARENTNODE_ID) REFERENCES DOCSHIFTER.NODE(ID));

CREATE TABLE IF NOT EXISTS  PARAMETER(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,DESCRIPTION VARCHAR(255),NAME VARCHAR(255),REQUIRED BOOLEAN,TYPE VARCHAR(255),VALUESJSON VARCHAR(100000),PARAMETERGROUP VARCHAR(255));
CREATE TABLE IF NOT EXISTS  MONITORING_CONFIGURATION(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAME VARCHAR(255));

CREATE TABLE IF NOT EXISTS  MONITORING_CONFIG_ITEM(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,TYPE VARCHAR(31) NOT NULL,CONFIGURATIONID BIGINT NOT NULL,CONSTRAINT FK4CH1VQDFNV832WCRXWBR1PWBI FOREIGN KEY(CONFIGURATIONID) REFERENCES DOCSHIFTER.MONITORING_CONFIGURATION(ID));

CREATE TABLE IF NOT EXISTS  MONITORING_DB_CONFIG_ITEM(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,CONNECTION VARCHAR(255),DRIVER VARCHAR(255),PASSWORD VARCHAR(255),TABLENAME VARCHAR(255),USER VARCHAR(255),CONSTRAINT FK7R4EB56SK328XNDFYXAYQ8SAH FOREIGN KEY(ID) REFERENCES DOCSHIFTER.MONITORING_CONFIG_ITEM(ID));

CREATE TABLE IF NOT EXISTS  MONITORING_SMTP_CONFIG(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,FROMADDRESS VARCHAR(320),HOST VARCHAR(255),PASSWORD VARCHAR(255),PORT INTEGER NOT NULL,SSL BOOLEAN NOT NULL,USERNAME VARCHAR(320));

CREATE TABLE IF NOT EXISTS  MONITORING_MAIL_CONFIG_ITEM(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,SMTPCONFIGURATION_ID BIGINT,CONSTRAINT FKQ3K1DYQV94RYRMCSPH6L4X4S8 FOREIGN KEY(SMTPCONFIGURATION_ID) REFERENCES DOCSHIFTER.MONITORING_SMTP_CONFIG(ID),CONSTRAINT FKFN95PYKCX7LPJC9X2JNVVXT6T FOREIGN KEY(ID) REFERENCES DOCSHIFTER.MONITORING_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORINGMAILADDRESS(MAILCONFIGURATIONITEMID BIGINT NOT NULL,EMAIL VARCHAR(320) NOT NULL,CONSTRAINT FKMHQRW4X7OCI1BUXGI5V88SY1B FOREIGN KEY(MAILCONFIGURATIONITEMID) REFERENCES DOCSHIFTER.MONITORING_MAIL_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORING_MAIL_TEMPLATE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,BODY VARCHAR(1000),TASKID VARCHAR(255),TITLE VARCHAR(998),MAILCONFIGURATIONITEMID BIGINT NOT NULL,CONSTRAINT FKM5SONVRK2SBYD62EVTWTOOC4K FOREIGN KEY(MAILCONFIGURATIONITEMID) REFERENCES DOCSHIFTER.MONITORING_MAIL_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORINGNOTIFICATIONLEVELS(CONFIGURATIONITEMID BIGINT NOT NULL,LEVEL VARCHAR(255) NOT NULL,PRIMARY KEY(CONFIGURATIONITEMID,LEVEL),CONSTRAINT FK36WMJDP7QKC18MI010U8LFJ0R FOREIGN KEY(CONFIGURATIONITEMID) REFERENCES DOCSHIFTER.MONITORING_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORING_SNMP_CONFIG_ITEM(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,COMMUNITY VARCHAR(255),IPADDRESS VARCHAR(255),PORT INTEGER NOT NULL,TRAPOID VARCHAR(255),CONSTRAINT FK652HW5IJRUPUG39FSHXXL8JUL FOREIGN KEY(ID) REFERENCES DOCSHIFTER.MONITORING_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORING_WEBHOOK_CONFIG_ITEM(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,URL VARCHAR(255),CONSTRAINT FK6XI79LJCYRCGH5I3RJMPKJQ1U FOREIGN KEY(ID) REFERENCES DOCSHIFTER.MONITORING_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORINGWEBHOOKHEADERPARAMS(WEBHOOKTEMPLATEID BIGINT NOT NULL PRIMARY KEY,VALUE VARCHAR(1000),NAME VARCHAR(255) NOT NULL);
CREATE TABLE IF NOT EXISTS  MONITORING_WEBHOOK_TEMPLATE(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,BODY VARCHAR(1000),TASKID VARCHAR(255),WEBHOOKCONFIGURATIONITEMID BIGINT,CONSTRAINT FKGAD4F35BPR3YOWL3MCVE8GVTA FOREIGN KEY(WEBHOOKCONFIGURATIONITEMID) REFERENCES DOCSHIFTER.MONITORING_WEBHOOK_CONFIG_ITEM(ID));
CREATE TABLE IF NOT EXISTS  MONITORINGWEBHOOKURLPARAMS(WEBHOOKTEMPLATEID BIGINT NOT NULL PRIMARY KEY,VALUE VARCHAR(1000),NAME VARCHAR(255) NOT NULL,CONSTRAINT FKKAPT5H9EMIYDD5V6B8HSJTYTX FOREIGN KEY(WEBHOOKTEMPLATEID) REFERENCES DOCSHIFTER.MONITORING_WEBHOOK_TEMPLATE(ID));
CREATE TABLE IF NOT EXISTS TEST_DB_NOTIFICATION(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY, timestamp VARCHAR(500),level VARCHAR(500),task_id VARCHAR(500),message VARCHAR(500),attachments VARCHAR(500) );
